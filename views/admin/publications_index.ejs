<% layout('../partials/layout') %>

    <section class="space-y-4">
        <header class="flex flex-col sm:flex-row sm:items-center justify-between gap-3">
            <div>
                <h1 class="text-2xl font-semibold text-slate-50">Публикации</h1>
                <p class="text-sm text-slate-300/90">Управление научными статьями и рукописями.</p>
            </div>
            <a href="/admin/publications/new" class="px-3 py-1.5 rounded-xl bg-emerald-500 hover:bg-emerald-400 text-slate-950 text-xs font-semibold transition">
      + Новая публикация
    </a>
        </header>

        <% if (!publications.length) { %>
            <p class="text-sm text-slate-300/85">Публикаций пока нет.</p>
            <% } else { %>
                <div class="rounded-2xl border border-white/10 bg-slate-900/70 overflow-hidden">
                    <table class="w-full text-sm">
                        <thead class="bg-slate-950/70 text-slate-300/90 text-xs uppercase tracking-wide">
                            <tr>
                                <th class="px-4 py-2 text-left">Название</th>
                                <th class="px-2 py-2 text-left w-40">Журнал</th>
                                <th class="px-2 py-2 text-left w-20">Год</th>
                                <th class="px-2 py-2 text-left w-32">Статус</th>
                                <th class="px-2 py-2 text-right w-40">Действия</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% publications.forEach(function(p){ %>
                                <tr class="border-t border-white/5 hover:bg-slate-900/90">
                                    <td class="px-4 py-2">
                                        <span class="font-medium text-slate-50"><%= p.title %></span>
                                    </td>
                                    <td class="px-2 py-2 text-xs text-slate-300/85">
                                        <%= p.journal || '-' %>
                                    </td>
                                    <td class="px-2 py-2 text-xs text-slate-300/85">
                                        <%= p.year || '-' %>
                                    </td>
                                    <td class="px-2 py-2 text-xs text-emerald-200">
                                        <%= p.status || '-' %>
                                    </td>
                                    <td class="px-2 py-2 text-right text-xs">
                                        <a href="/admin/publications/<%= p.id %>/edit" class="inline-flex items-center px-2 py-1 rounded-lg bg-sky-500/15 text-sky-200 hover:bg-sky-500/30 mr-1">
                  Редактировать
                </a>
                                        <form action="/admin/publications/<%= p.id %>?_method=DELETE" method="POST" class="inline" onsubmit="return confirm('Удалить эту публикацию?');">
                                            <button type="submit" class="inline-flex items-center px-2 py-1 rounded-lg bg-red-500/15 text-red-200 hover:bg-red-500/30">
                    Удалить
                  </button>
                                        </form>
                                    </td>
                                </tr>
                                <% }) %>
                        </tbody>
                    </table>
                </div>
                <% } %>
    </section>